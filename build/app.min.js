function BMORE_ERROR(e){this.name="BMORE_ERROR",this.message="BMORE_JS_ERROR:"+e||"BMORE_JS_GENERIC_ERROR"}BMORE_ERROR.prototype=new Error,BMORE_ERROR.prototype.constructor=BMORE_ERROR;var BMORE={appSettings:function(){function e(){return window.location.protocol+"//"+window.location.host}function t(){return n}function a(e){try{if(!Array.isArray(e))throw new BMORE_ERROR("Param to 'setApplicationFonts' is not of type Array.");n=e}catch(t){console.error(t.message)}}var n=["Oswald:300","Oswald:400","Roboto"];return{getFonts:t,setFonts:a,getBaseURL:e}}(),ajax:{},utils:{},plugins:{},systemMessenger:function(){function e(){if(o=$("#systemMessenger"),i=o.find(".messenger-message"),r=o.length>0&&i.length>0,!r)throw new BMORE_ERROR("System messenger has not been bound properly.")}function t(){if(!r)throw new BMORE_ERROR("System messenger has not been bound properly.");i.html("")}function a(e,t){if(!r)throw new BMORE_ERROR("System messenger has not been bound properly.");i.html(e),o.fadeIn(),void 0!==typeof t&&t&&setTimeout(n,3750)}function n(){if(!r)throw new BMORE_ERROR("System messenger has not been bound properly.");o.fadeOut(),t()}var o=null,r=!1,i=null;return{set:e,reset:t,show:a,hide:n}}(),header:{},cart:{},slider:{},footer:{},module:{home:{},events:{},gallery:{},blog:{},contact:{},social:{}}};BMORE.utils=function(e){var t={};return t.checkIsMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||e.opera),t},t.debounce=function(e,t,a){var n,o,r,i,c,s=function(){var l=(new Date).getTime()-i;t>l&&l>0?n=setTimeout(s,t-l):(n=null,a||(c=e.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,i=(new Date).getTime();var l=a&&!n;return n||(n=setTimeout(s,t)),l&&(c=e.apply(r,o),r=o=null),c}},t.throttle=function(e,t,a){var n,o,r,i=null,c=0;a||(a={});var s=function(){c=a.leading===!1?0:(new Date).getTime(),i=null,r=e.apply(n,o),i||(n=o=null)};return function(){var l=(new Date).getTime();c||a.leading!==!1||(c=l);var d=t-(l-c);return n=this,o=arguments,0>=d||d>t?(clearTimeout(i),i=null,c=l,r=e.apply(n,o),i||(n=o=null)):i||a.trailing===!1||(i=setTimeout(s,d)),r}},t}(window,document),BMORE.plugins=function(e,t,a){var n={webfonts:{load:function(e,t,a){var n={};n[e]={families:t},void 0!==typeof a&&"google"===e&&(n.type=a),WebFont.load(n)}},niceScroll:{enable:function(e,t){var n=e||a("html"),o=t||{};n.niceScroll(o)}},owlCarousel:{enable:function(e,t){var a=e,n=t||{};if(0===a.length)throw new BMORE_ERROR("Set a valid element to use for the owlCarousel");a.owlCarousel(n);var o=a.closest(".wrapper").find(".custom-carousel-nav");o.length>0&&(o.find(".next").click(function(){a.trigger("owl.next")}),o.find(".prev").click(function(){a.trigger("owl.prev")}))}}};return n}(window,document,$),BMORE.header=function(e,t,a,n,o,r,i){var c=function(){return this.$el=a("#header"),this.$html=a("html"),this};return c.prototype={constructor:c,enablePlugins:function(e){"undefined"==typeof e.niceScroll||n.checkIsMobile()||r.enable(this.$html),"undefined"!=typeof e.webfonts&&i.load("google",o.getFonts())}},c}(window,document,$,BMORE.utils,BMORE.appSettings,BMORE.plugins.niceScroll,BMORE.plugins.webfonts),BMORE.cart=function(e,t,a,n,o,r){function i(){a(".validation-error").fadeOut(),a(".has-error").removeClass("has-error")}function c(){var e=a(this).closest(".form-group"),t=e.find(".validation-error");t.fadeIn(),e.addClass("has-error")}function s(){return""===a(this).val()}function l(e){var t=e.filter(s);return i(),0===t.length?!0:(t.each(c),!1)}function d(){var e=a(".nav-wizard").find("li.active"),n=e.data().prev,o=a(".nav-wizard li:nth-child("+n+") a");return o.tab("show"),a(t).scrollTop(0),!1}function u(e){e.preventDefault();var n=a(e.currentTarget),o=a(".nav-wizard").find("li.active"),r=o.data(),i=r.step,c=r.next,s=(r.prev,o.find("a").attr("href")),d=a(s),u=n.hasClass("tab-toggler");if(u){var p=n.closest("li").data();if(clickedStep=p.step,!(clickedStep>i))return a(t).scrollTop(0),a(".nav-wizard li:nth-child("+clickedStep+") a").tab("show"),!1;c=clickedStep-i==2?clickedStep-1:clickedStep}switch(c){case 1:case 2:var h=l.call(this,a(":input[required]",d));case 3:if(3===c){if(1==a("input[name=paymentMethod]:checked").val()){var f=a("input, select",a("#authorizeNetPayment"));if(h=l.call(this,f),!h)return!1}var g=a("#billingInformationContainer .form-group").clone(),m=g.find(":input");m.prop("disabled",!0),m.parent().removeClass().addClass("col-xs-9"),a("#billingInfoSummaryLoader").html(g);var v=a("#paymentMethodSummaryLoader"),y="<h4>Paying for packages through Paypal processor</h4>";return 1==a("input[name=paymentMethod]:checked").val()&&(y=a("#authorizeNetPayment .form-group").clone(),y.find(":input").prop("disabled",!0)),v.html(y),a(".nav-wizard li:nth-child("+c+") a").tab("show"),a(t).scrollTop(0),!0}if(h)return a(".nav-wizard li:nth-child("+c+") a").tab("show"),a(t).scrollTop(0),!0}return!1}function p(){var e=a("input[name='paymentMethod']:checked"),t=a("#authorizeNetPayment");1==e.val()?t.fadeIn():t.fadeOut()}function h(){return a.ajax({url:"action.register.php",data:a("#registrationForm").serializeArray(),type:"POST",dataType:"json"})}function f(e,a,n){var o=t.createElement("input");o.type="hidden",o.name=a,o.value=n,e.appendChild(o)}function g(e,a,n){var o=t.forms.paypalForm;for(var i in e)f(o,i,e[i]);a.forEach(function(e){for(var t in e)f(o,t,e[t])});var c=n.map(function(e){return e.registrationCode}).join(","),s=_.encode(c);f(o,"custom",s);var l=r.getBaseURL()+"/cart/checkout/";return f(o,"return",l+"transactionCompleted.php?ids="+s),f(o,"cancel_return",l+"transactionCanceled.php?ids="+s),!0}function m(e){if(e.success)if(e.ispp){var o=g(e.billing,e.packages,e.registrationCodes);o&&(a("#transaction-overlay").fadeOut(),n.show("<p>Completed processing. You will now be redirected to paypal to finish your payment processing.</p><p>This could take a few moments please be patient.</p>",!1),t.forms.paypalForm.submit())}else console.log("Process as authorize.net");else a("#transaction-overlay").fadeOut(),n.show("PROCESSING ERROR! "+e.message,!1)}function v(){alert("There was an error while processing your payment information")}function y(){a("#transaction-overlay").fadeIn(),a(".buy-now").prop("disabled",!0),h().then(m,v)}function k(){var e=[],t=a(":input").filter(" [required]:visible");return t.each(function(){var t=a(this),n=t.prop("type"),o=t.val();switch(n){case"select-one":(void 0===typeof o||""===o)&&e.push(t);break;default:(void 0===typeof o||0===o)&&e.push(t)}}),[0===e.length,e]}function w(e,t){"success"!==t&&(alert("Error occurred while trying to load packages. Please contact an administrator to report the error!"),this.$ajaxQuickAddModal.modal("hide"))}function b(e,n){try{var o=parseInt(e.val()),r=e.closest("tr").find("input.selectable-package"),i=r.length>0;1>=o&&0>n?(i&&r.prop("checked",!1),e.val(0)):(e.val(o+n),i&&r.prop("checked",!0)),a(t).trigger(i?"update.quickadd":"update.eventadd")}catch(c){console.log(c),e.val(0)}}function R(e){e.preventDefault(),e.stopPropagation();var t=a(e.currentTarget),n=t.closest(".quantity-wrapper").find("input");b(n,1)}function C(e){e.preventDefault();var t=a(e.currentTarget),n=t.closest(".quantity-wrapper").find("input");b(n,-1),e.stopPropagation()}function E(e,t){for(var a={packageIds:{}},n=0,o=e.length;o>n;n++){var r=e[n].name,i=e[n].value,c=/[0-9 -()+]+$/,s=c.exec(r);if(s&&s.length>0){var l=s[0];if(-1!==r.indexOf("quantity_")){var d=parseInt(i);(t&&0===d||d>0)&&(a.packageIds[l]=d)}}else a[r]=i}return a}function O(){alert("Error occurred while trying to load items into the cart. Please try again. If there continues to be an issue please contact us for support.")}function M(e){return a.ajax({url:"/cart/action.cartUpdate.php",data:e,dataType:"json",type:"POST"})}function S(e){var t=this;e&&e.success?a("#topbarAjaxLoader").empty().load("/_includes/topbar.php",function(){n.show("Successfully added "+e.numAdded+" to your cart. Updated "+e.numUpdated+" records that were in your cart.",!0),t.$ajaxQuickAddModal.length>0&&t.$ajaxQuickAddModal.is(":visible")&&t.$ajaxQuickAddModal.modal("hide")}):alert("error while trying to update the cart")}function A(e){e&&e.success?location.reload():alert("error while trying to update the cart")}function B(e,t,a){var n=0,o={packageIds:{}};for(o.packageIds[e]=t;n<a.length;n++){var r=a[n].name,i=a[n].value;("quantity"!=r||"id"!=r)&&(o[r]=i)}return o}function T(e){e.preventDefault();var t=a("#selectAddToCartForm"),o=k(t),r=o[0];if(r)try{var i=parseInt(a("#packageSelectList").val()),c=parseInt(a("#packageQuantityInput").val());if(""===i||1>c)n.show("At least one package and quantity must be set up to add to your cart.",!0);else{var s=B(i,c,t.serializeArray());Object.keys(s.packageIds).length>0?M(s).then(S.bind(this),O):n.show("At least one package and quantity must be set up to add to your cart.",!0)}}catch(l){console.log(l),n.show("At least one package and quantity must be set up to add to your cart.",!0)}else{var d=o[1];d.forEach(function(){a(this).addClass("has-error")})}}function x(e){e.preventDefault();var t=a("#quickAddToCartForm"),o=E(t.serializeArray(),!1);Object.keys(o.packageIds).length>0?M(o).then(S.bind(this),O):n.show("No packages were selected to be added to the cart!",!0)}var _={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,o,r,i,c,s="",l=0;for(e=_._utf8_encode(e);l<e.length;)t=e.charCodeAt(l++),a=e.charCodeAt(l++),n=e.charCodeAt(l++),o=t>>2,r=(3&t)<<4|a>>4,i=(15&a)<<2|n>>6,c=63&n,isNaN(a)?i=c=64:isNaN(n)&&(c=64),s=s+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(c);return s},decode:function(e){var t,a,n,o,r,i,c,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)o=this._keyStr.indexOf(e.charAt(l++)),r=this._keyStr.indexOf(e.charAt(l++)),i=this._keyStr.indexOf(e.charAt(l++)),c=this._keyStr.indexOf(e.charAt(l++)),t=o<<2|r>>4,a=(15&r)<<4|i>>2,n=(3&i)<<6|c,s+=String.fromCharCode(t),64!=i&&(s+=String.fromCharCode(a)),64!=c&&(s+=String.fromCharCode(n));return s=_._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",a=0,n=c1=c2=0;a<e.length;)n=e.charCodeAt(a),128>n?(t+=String.fromCharCode(n),a++):n>191&&224>n?(c2=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),a+=3);return t}},I=function(){return this.$html=a("html"),this.$body=a("body"),this.$el=a("#topbar"),this.$topCart=a("#topbarCartDisplay"),this.$topCartContents=a("#topbarCartContents"),this.$ajaxQuickAddModal=a("#ajaxQuickAddModal"),this};return I.prototype={constructor:I,init:function(){this._bindEvents()},_toggleCartContentsDisplay:function(e){e.preventDefault(),a("#topbarCartContents").fadeToggle("fast")},_bindEvents:function(){!o.checkIsMobile()&&a(e).width()>768?a(t).on("mouseenter.cartContents mouseleave.cartContents",".topbar-hoverer",this._toggleCartContentsDisplay.bind(this)):a(t).on("touchstart click","#topbarCartDisplay",this._toggleCartContentsDisplay.bind(this)),a(t).on("click.quickadd",".quick-add",this.loadQuickAddPackageModal.bind(this)),a(t).on("click.quickadd","button.quantity-up",R),a(t).on("click.quickadd","button.quantity-down",C),a(t).on("update.quickadd",this.updateTableAddConfiguration.bind(this)),a(t).on("update.eventadd",this.updateSelectAddConfiguration),a(t).on("click.quickadd","button#quickAddToCartButton",x.bind(this)),a(t).on("click.eventadd","button#packageAddToCartEventViewButton",T.bind(this)),a(t).on("change.eventadd","select#packageSelectList, input#packageQuantityInput",this.updateSelectAddConfiguration),a(t).on("click.checkoutupdate","#checkoutCartUpdate",this.updateCheckoutTableWithNewItems),a(t).on("click.checkoutNextStep",".next-step, .tab-toggler",u),a(t).on("click.checkoutBackStep",".back-step",d),a(t).on("change","input[name='paymentMethod']",p),a(t).on("click",".buy-now",y)},checkoutToggler:function(){i(),p()},loadQuickAddPackageModal:function(e){e.preventDefault();var t=a(e.currentTarget),n=this.$ajaxQuickAddModal.find(".modal-content"),o=t.attr("href");n.empty().load(o,w.bind(this)),this.$ajaxQuickAddModal.modal("show")},updateCheckoutTableWithNewItems:function(e){e.preventDefault();var t=a("#checkoutTableForm"),o=E(t.serializeArray(),!0);Object.keys(o.packageIds).length>0?M(o).then(A,O):n.show("No packages have changed!",!0)},updateSelectAddConfiguration:function(){var e=(a("#selectAddToCartForm"),a("#configDollarTotal")),t=a("#packageSelectList"),n=t.find("option:selected"),o=a("#packageQuantityInput"),r=t.val(),i=0;try{if(r>0){var c=n.attr("data-price"),s=parseInt(o.val());s>0&&c>=0&&(i+=s*c)}}catch(l){throw new BMORE_ERROR(l)}e.text("$ "+i.toFixed(2))},updateTableAddConfiguration:function(){var e=this.$ajaxQuickAddModal.find("table"),t=a("#configDollarTotal"),n=0,o=e.find("tbody tr");o.each(function(){var e=a(this),t=e.find("input.selectable-package"),o=e.find(".quickadd-package-price"),r=e.find(".package-quantity"),i=t.is(":checked");try{var c=parseFloat(o.text()),s=parseInt(r.val());if(!i)return;n+=s*c}catch(l){throw new BMORE_ERROR(l)}}),t.val(n.toFixed(2))}},I}(window,document,$,BMORE.systemMessenger,BMORE.utils,BMORE.appSettings),BMORE.slider=function(e,t,a,n){function o(e){var t=a(e.currentTarget).find(".description").is(":visible")?1:.1,n=a(e.currentTarget).find("img"),o=a(e.currentTarget).find(".description");n.animate({opacity:t},1),o.toggle()}var r=function(){return this.$el=null,this.settings={interval:6e3},this};return r.prototype={constructor:r,setType:function(e){switch(e){case"featuredEvents":this.$el=a("#featuredEventsCarousel")}return this},enableDescriptionOverlay:function(){var e=a(".img-text-overlay",this.$el);return e.on("mouseenter mouseleave",o),this},init:function(){if(void 0===typeof this.$el)throw new BMORE_ERROR("Please set a valid type for the slider.");var e=this;return n.enable(this.$el,{stopOnHover:!0,autoPlay:5e3,items:3,itemsDesktop:[1199,3],itemsDesktopSmall:[979,2],lazyLoad:!0,afterInit:function(){e.$el.fadeIn()}}),this}},r}(window,document,$,BMORE.plugins.owlCarousel,BMORE.cart),$(function(){(new BMORE.header).enablePlugins({niceScroll:!0});var e=$(window),t=e.width(),a=e.height(),n=document.getElementById("featuredEventsCarousel"),o=new BMORE.slider;n&&(o.setType("featuredEvents").init(),!BMORE.utils.checkIsMobile()&&t>=992&&o.enableDescriptionOverlay()),BMORE.systemMessenger.set();var r=new BMORE.cart;r.init(),$("#scrollToTop button").on("click touchend",function(){return $("html").animate({scrollTop:0},600),!1}),$(".max-height-container").css("max-height",a-200);var i=document.getElementById("registrationWrapper");i&&r.checkoutToggler();var c=document.getElementById("informationalDividerWrapper");c&&(window.fbAsyncInit=function(){FB.init({appId:"550094458427750",xfbml:!0,version:"v2.1"})},function(){e.on("scroll",BMORE.utils.debounce(function(){e.scrollTop()>250&&(!function(e,t,a){var n,o=e.getElementsByTagName(t)[0];e.getElementById(a)||(n=e.createElement(t),n.id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk"),$(window).off("scroll"))},500))}())});